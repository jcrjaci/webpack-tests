/*!
 * Deskum 0.8.6
 * Copyright Â© 2015-2017 BySide
 * http://byside.com
 */
!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):t.Deskum=e(t.$)}(this,function(){var t,e,i;return function(n){function s(t,e){var i,n,s,o,a,r,l,c,h,d,u=e&&e.split("/"),m=p.map,f=m&&m["*"]||{};if(t&&"."===t.charAt(0)&&e){for(u=u.slice(0,u.length-1),t=u.concat(t.split("/")),c=0;d=t[c];c++)if("."===d)t.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===t[2]||".."===t[0]))return!0;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}if((u||f)&&m){for(i=t.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),u)for(h=u.length;h>0;h-=1)if(s=m[u.slice(0,h).join("/")],s&&(s=s[n])){o=s,a=c;break}if(o)break;!r&&f&&f[n]&&(r=f[n],l=c)}!o&&r&&(o=r,a=l),o&&(i.splice(0,a,o),t=i.join("/"))}return t}function o(t,e){return function(){return u.apply(n,v.call(arguments,0).concat([t,e]))}}function a(t){return function(e){return s(e,t)}}function r(t){return function(e){m[t]=e}}function l(t){if(f.hasOwnProperty(t)){var e=f[t];delete f[t],w[t]=!0,d.apply(n,e)}if(!m.hasOwnProperty(t))throw new Error("No "+t);return m[t]}function c(t,e){var i,n,o=t.indexOf("!");return-1!==o?(i=s(t.slice(0,o),e),t=t.slice(o+1),n=l(i),t=n&&n.normalize?n.normalize(t,a(e)):s(t,e)):t=s(t,e),{f:i?i+"!"+t:t,n:t,p:n}}function h(t){return function(){return p&&p.config&&p.config[t]||{}}}var d,u,m={},f={},p={},w={},v=[].slice;d=function(t,e,i,s){var a,d,u,p,v,g,b=[];if(s=s||t,"function"==typeof i){for(e=!e.length&&i.length?["require","exports","module"]:e,g=0;g<e.length;g++)if(v=c(e[g],s),u=v.f,"require"===u)b[g]=o(t);else if("exports"===u)b[g]=m[t]={},a=!0;else if("module"===u)d=b[g]={id:t,uri:"",exports:m[t],config:h(t)};else if(m.hasOwnProperty(u)||f.hasOwnProperty(u))b[g]=l(u);else if(v.p)v.p.load(v.n,o(s,!0),r(u),{}),b[g]=m[u];else if(!w[u])throw new Error(t+" missing "+u);p=i.apply(m[t],b),t&&(d&&d.exports!==n&&d.exports!==m[t]?m[t]=d.exports:p===n&&a||(m[t]=p))}else t&&(m[t]=i)},t=e=u=function(t,e,i,s){return"string"==typeof t?l(c(t,e).f):(t.splice||(p=t,e.splice?(t=e,e=i,i=null):t=n),e=e||function(){},s?d(n,t,e,i):setTimeout(function(){d(n,t,e,i)},15),u)},u.config=function(t){return p=t,u},i=function(t,e,i){e.splice||(i=e,e=[]),f[t]=[t,e,i]},i.amd={jQuery:!0}}(),i("almond",[],function(){}),function(t,e){"function"==typeof i&&i.amd?i("handlebars",[],e):"object"==typeof exports?module.exports=e():t.Handlebars=t.Handlebars||e()}(this,function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return l[t]}function i(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],i)&&(t[i]=arguments[e][i]);return t}function n(t){return t instanceof r?t.toString():null==t?"":t?(t=""+t,h.test(t)?t.replace(c,e):t):t+""}function s(t){return t||0===t?m(t)&&0===t.length?!0:!1:!0}function o(t,e){return(t?t+".":"")+e}var a={},r=t,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,h=/[&<>"'`]/;a.extend=i;var d=Object.prototype.toString;a.toString=d;var u=function(t){return"function"==typeof t};u(/x/)&&(u=function(t){return"function"==typeof t&&"[object Function]"===d.call(t)});var u;a.isFunction=u;var m=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===d.call(t):!1};return a.isArray=m,a.escapeExpression=n,a.isEmpty=s,a.appendContextPath=o,a}(t),i=function(){"use strict";function t(t,e){var n;e&&e.firstLine&&(n=e.firstLine,t+=" - "+n+":"+e.firstColumn);for(var s=Error.prototype.constructor.call(this,t),o=0;o<i.length;o++)this[i[o]]=s[i[o]];n&&(this.lineNumber=n,this.column=e.firstColumn)}var e,i=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),n=function(t,e){"use strict";function i(t,e){this.helpers=t||{},this.partials=e||{},n(this)}function n(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new a("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var n=i.inverse,s=i.fn;if(e===!0)return s(this);if(e===!1||null==e)return n(this);if(h(e))return e.length>0?(i.ids&&(i.ids=[i.name]),t.helpers.each(e,i)):n(this);if(i.data&&i.ids){var a=w(i.data);a.contextPath=o.appendContextPath(i.data.contextPath,i.name),i={data:a}}return s(e,i)}),t.registerHelper("each",function(t,e){if(!e)throw new a("Must pass iterator to #each");var i,n,s=e.fn,r=e.inverse,l=0,c="";if(e.data&&e.ids&&(n=o.appendContextPath(e.data.contextPath,e.ids[0])+"."),d(t)&&(t=t.call(this)),e.data&&(i=w(e.data)),t&&"object"==typeof t)if(h(t))for(var u=t.length;u>l;l++)i&&(i.index=l,i.first=0===l,i.last=l===t.length-1,n&&(i.contextPath=n+l)),c+=s(t[l],{data:i});else for(var m in t)t.hasOwnProperty(m)&&(i&&(i.key=m,i.index=l,i.first=0===l,n&&(i.contextPath=n+m)),c+=s(t[m],{data:i}),l++);return 0===l&&(c=r(this)),c}),t.registerHelper("if",function(t,e){return d(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||o.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),t.registerHelper("with",function(t,e){d(t)&&(t=t.call(this));var i=e.fn;if(o.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var n=w(e.data);n.contextPath=o.appendContextPath(e.data.contextPath,e.ids[0]),e={data:n}}return i(t,e)}),t.registerHelper("log",function(e,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(n,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}var s={},o=t,a=e,r="2.0.0";s.VERSION=r;var l=6;s.COMPILER_REVISION=l;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};s.REVISION_CHANGES=c;var h=o.isArray,d=o.isFunction,u=o.toString,m="[object Object]";s.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:f,log:p,registerHelper:function(t,e){if(u.call(t)===m){if(e)throw new a("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){u.call(t)===m?o.extend(this.partials,t):this.partials[t]=e},unregisterPartial:function(t){delete this.partials[t]}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(f.level<=t){var i=f.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,e)}}};s.logger=f;var p=f.log;s.log=p;var w=function(t){var e=o.extend({},t);return e._parent=t,e};return s.createFrame=w,s}(e,i),s=function(t,e,i){"use strict";function n(t){var e=t&&t[0]||1,i=u;if(e!==i){if(i>e){var n=m[i],s=m[e];throw new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+s+").")}throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){if(!e)throw new d("No environment passed to template");if(!t||!t.main)throw new d("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var i=function(i,n,s,o,a,r,l,c,u){a&&(o=h.extend({},o,a));var m=e.VM.invokePartial.call(this,i,s,o,r,l,c,u);if(null==m&&e.compile){var f={helpers:r,partials:l,data:c,depths:u};l[s]=e.compile(i,{data:void 0!==c,compat:t.compat},e),m=l[s](o,f)}if(null!=m){if(n){for(var p=m.split("\n"),w=0,v=p.length;v>w&&(p[w]||w+1!==v);w++)p[w]=n+p[w];m=p.join("\n")}return m}throw new d("The partial "+s+" could not be compiled when running in runtime-only mode")},n={lookup:function(t,e){for(var i=t.length,n=0;i>n;n++)if(t[n]&&null!=t[n][e])return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:h.escapeExpression,invokePartial:i,fn:function(e){return t[e]},programs:[],program:function(t,e,i){var n=this.programs[t],s=this.fn(t);return e||i?n=o(this,t,s,e,i):n||(n=this.programs[t]=o(this,t,s)),n},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i=h.extend({},e,t)),i},noop:e.VM.noop,compilerInfo:t.compiler},s=function(e,i){i=i||{};var o=i.data;s._setup(i),!i.partial&&t.useData&&(o=l(e,o));var a;return t.useDepths&&(a=i.depths?[e].concat(i.depths):[e]),t.main.call(n,e,n.helpers,n.partials,o,a)};return s.isTop=!0,s._setup=function(i){i.partial?(n.helpers=i.helpers,n.partials=i.partials):(n.helpers=n.merge(i.helpers,e.helpers),t.usePartial&&(n.partials=n.merge(i.partials,e.partials)))},s._child=function(e,i,s){if(t.useDepths&&!s)throw new d("must pass parent depths");return o(n,e,t[e],i,s)},s}function o(t,e,i,n,s){var o=function(e,o){return o=o||{},i.call(t,e,t.helpers,t.partials,o.data||n,s&&[e].concat(s))};return o.program=e,o.depth=s?s.length:0,o}function a(t,e,i,n,s,o,a){var r={partial:!0,helpers:n,partials:s,data:o,depths:a};if(void 0===t)throw new d("The partial "+e+" could not be found");return t instanceof Function?t(i,r):void 0}function r(){return""}function l(t,e){return e&&"root"in e||(e=e?f(e):{},e.root=t),e}var c={},h=t,d=e,u=i.COMPILER_REVISION,m=i.REVISION_CHANGES,f=i.createFrame;return c.checkRevision=n,c.template=s,c.program=o,c.invokePartial=a,c.noop=r,c}(e,i,n),o=function(t,e,i,n,s){"use strict";var o,a=t,r=e,l=i,c=n,h=s,d=function(){var t=new a.HandlebarsEnvironment;return c.extend(t,a),t.SafeString=r,t.Exception=l,t.Utils=c,t.escapeExpression=c.escapeExpression,t.VM=h,t.template=function(e){return h.template(e,t)},t},u=d();return u.create=d,u["default"]=u,o=u}(n,t,i,e,s);return o}),function(t){"use strict";function e(t,e,i){return function(n){return(n.funct===t&&n.scope===e)===i}}function n(t,i,n,s){return t[i]?t[i].some(e(n,s,!0)):!1}function s(){this._listeners={}}s.prototype={listenersCount:function(t){var e=this._listeners[t];return e?e.length:0},on:function(t,e,i){var s=this._listeners;n(s,t,e,i)||(s[t]||(s[t]=[]),s[t].push({funct:e,scope:i}))},off:function(t,i,n){var s=this._listeners[t];s&&(this._listeners[t]=s.filter(e(i,n,!1)))},once:function(t,e,i){n(this._listeners,t,e,i)||this.on(t,function s(){this.off(t,s,this),e.apply(i,arguments)},this)},emit:function(t){var e=this._listeners[t];if(e){var i=Array.prototype.slice.call(arguments,1);e.forEach(function(t){t.funct.apply(t.scope,i)})}},connect:function(t,e){if(t)for(var i in t)t.hasOwnProperty(i)&&this.on(i,t[i],e)},disconnect:function(t,e){if(t)for(var i in t)t.hasOwnProperty(i)&&this.off(i,t[i],e)}},"undefined"!=typeof module&&module.exports?module.exports=s:"undefined"!=typeof i&&i.amd?i("deskum/core/emitter",[],function(){return s}):t.Emitter=s}(this),function(t){"use strict";function e(t,e,i){setTimeout(function(){t.apply(e,i)})}function n(t,e,i){var n="Error on "+t+" promise execution at index ["+i+"]";Error.call(this,n),this.child=e,this.index=i,this.message=n}function s(){this._future=new r}function o(t){return t.hasSucceed()}function a(t,e,i,s,o){return i+=1,i>=t.length?s.done(o):o instanceof r?void o.then(function(){a(t,e,i,s,t[i].apply(e,arguments))},function(t){s.fail(new n(" serial ",t,i))}):a(t,e,i,s,t[i].call(e,o))}function r(){this._args=null,this._fn={success:[],failed:[],"finally":[]}}var l=Array.prototype.slice;s.prototype={constructor:s,done:function(){var t=l.call(arguments);this.getFuture()._arrived("success",t)},fail:function(){var t=l.call(arguments);this.getFuture()._arrived("failed",t)},getFuture:function(){return this._future}},s.done=function(){var t=new s;return t.done.apply(t,arguments),t.getFuture()},s.failed=function(){var t=new s;return t.fail.apply(t,arguments),t.getFuture()},s.parallel=function(){return s.all(l.call(arguments))},s.all=function(t){if(!t||!t.length)return s.done();t=t.map(function(t){return t.getFuture?t.getFuture():t});var e=new s,i=[];return t.forEach(function(s,a){s.then(function(){i[a]=l.call(arguments),t.every(o)&&e.done.apply(e,i)},function(t){e.fail(new n("parallel",t,a))})}),e.getFuture()},s.serial=function(t,e){if(!t||0===t.length)return s.done();var i=new s;return setTimeout(function(){a(t,e,0,i,t[0].call(e))}),i.getFuture()},r.prototype={constructor:r,_add:function(t,i,n){return i?this._fn[t]===!0?e(i,n,this._args):this._fn[t]&&this._fn[t].push({callback:i,scope:n}):console.warn("No callback passed"),this},_arrived:function(t,e){function i(t){t.callback.apply(t.scope,e)}if(this.isCompleted())throw new Error("Future already arrived!");var n=this._fn[t].concat(this._fn["finally"]);this._fn={success:!1,failed:!1,"finally":!0},this._args=e,this._fn[t]=!0,n.forEach(i)},isCompleted:function(){return this._fn["finally"]===!0},hasFailed:function(){return this._fn.failed===!0},hasSucceed:function(){return this._fn.success===!0},onDone:function(t,e){return this._add("success",t,e)},onError:function(t,e){return this._add("failed",t,e)},onFinally:function(t,e){return this._add("finally",t,e)},then:function(t,e,i){t&&this.onDone(t),e&&this.onError(e),i&&this.onFinally(i)},transform:function(t){var e=new s;return this.then(function(){var i=t.apply(null,arguments);i&&"array"===i.constructor||(i=[i]),e.done.apply(e,i)},function(){e.fail.apply(e,arguments)}),e.getFuture()}},s.PromiseError=n,s.Future=r,"undefined"!=typeof module&&module.exports?module.exports=s:"undefined"!=typeof i&&i.amd?i("deskum/core/promise",[],function(){return s}):t.Promise=s}(this),i("deskum/core/view",[],function(){"use strict";for(var t=/^(?:(.*)\s)?(\w+)$/,e="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",i="animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",n=["transform","transition","animation","transform-origin"],s=n.length;s--;)!function(t){$.cssHooks[t]={get:function(){return null},set:function(e,i){e.style["-webkit-"+t]=i,e.style["-moz-"+t]=i,e.style["-ms-"+t]=i,e.style["-o-"+t]=i,e.style[t]=i}}}(n[s]);return $.fn.extend({listen:function(e,i){var n,s,o,a=this;return $.each(e,function(e,r){if(n=e.match(t),s=n[1],o=n[2],"mousedown"===o?o+=" touchstart":"mousemove"===o?o+=" touchmove":"mouseup"===o?o+=" touchend":"click"===o&&(o+=" touchend"),"string"==typeof r&&(r=i[r]),!r)throw new Error("Handler not found");s?a.on(o,s,r.bind(i)):a.on(o,r.bind(i))}),this},onTransitionEnd:function(t,i){this.one(e,function(){t.apply(i||this)})},onAnimationEnd:function(t,e){this.one(i,function(){t.apply(e||this)})}}),function(t){return"function"==typeof t?function(e){return $(t(e||{}))}:$(t)}}),i("deskum/tpl/templates",["handlebars"],function(t){return function(e){return e.dock=e.dock||{},e.dock.classic=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var s,o="function",a=e.helperMissing,r=this.escapeExpression;return'<div class="wm-label wm-label-classic '+r((s=null!=(s=e.classname||(null!=t?t.classname:t))?s:a,typeof s===o?s.call(t,{name:"classname",hash:{},data:n}):s))+'" data-window-title="'+r((s=null!=(s=e.title||(null!=t?t.title:t))?s:a,typeof s===o?s.call(t,{name:"title",hash:{},data:n}):s))+'" title="'+r((s=null!=(s=e.title||(null!=t?t.title:t))?s:a,typeof s===o?s.call(t,{name:"title",hash:{},data:n}):s))+'">\n	<section class="wm-label-content"></section>\n</div>\n'},useData:!0}),e.sidebar=e.sidebar||{},e.sidebar.classic=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var s,o="function",a=e.helperMissing,r=this.escapeExpression;return'<div class="wm-sidebar '+r((s=null!=(s=e.classname||(null!=t?t.classname:t))?s:a,typeof s===o?s.call(t,{name:"classname",hash:{},data:n}):s))+'">\n	<div class="wm-sidebar-content"></div>\n</div>'},useData:!0}),e.taskbar=e.taskbar||{},e.taskbar.classic=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var s,o="function",a=e.helperMissing,r=this.escapeExpression;return'<div class="wm-taskbar-app wm-taskbar-app-classic '+r((s=null!=(s=e.classname||(null!=t?t.classname:t))?s:a,typeof s===o?s.call(t,{name:"classname",hash:{},data:n}):s))+'" data-window-title="'+r((s=null!=(s=e.title||(null!=t?t.title:t))?s:a,typeof s===o?s.call(t,{name:"title",hash:{},data:n}):s))+'" title="'+r((s=null!=(s=e.title||(null!=t?t.title:t))?s:a,typeof s===o?s.call(t,{name:"title",hash:{},data:n}):s))+'">\n	<div class="task-button">\n		<section class="task-button-content"></section>\n	</div>\n</div>\n'},useData:!0}),e.topbar=e.topbar||{},e.topbar.classic=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var s,o="function",a=e.helperMissing,r=this.escapeExpression;return'<div class="wm-topbar wm-topbar-classic '+r((s=null!=(s=e.classname||(null!=t?t.classname:t))?s:a,typeof s===o?s.call(t,{name:"classname",hash:{},data:n}):s))+'">\n    <div class="wm-topbar-content"></div>\n</div>\n'},useData:!0}),e.window=e.window||{},e.window.classic=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var s,o="function",a=e.helperMissing,r=this.escapeExpression;return'<div class="wm-window wm-window-classic '+r((s=null!=(s=e.classname||(null!=t?t.classname:t))?s:a,typeof s===o?s.call(t,{name:"classname",hash:{},data:n}):s))+'">\n	<div class="wm-window-box">\n		<header class="wm-window-title" unselectable="on">\n			<div class="wm-window-title-content">\n				<div class="wm-window-icon"></div>\n				<div class="wm-window-menu">\n					<a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">\n						<i class="fa fa-icon fa-fw fa-angle-down"></i>\n					</a>\n					<ul class="dropdown-menu"></ul>\n				</div>\n				<h1 unselectable="on">'+r((s=null!=(s=e.title||(null!=t?t.title:t))?s:a,typeof s===o?s.call(t,{name:"title",hash:{},data:n}):s))+'</h1>\n				<div class="wm-button-group">\n					<button class="wm-minimize">&nbsp;</button>\n					<button class="wm-maximize">&nbsp;</button>\n					<button class="wm-close">&nbsp;</button>\n				</div>\n			</div>\n		</header>\n		<section class="wm-topbar-container"></section>\n		<section class="wm-content-wrapper">\n			<section class="wm-content"></section>\n		</section>\n		<button class="wm-resize">&nbsp;</button>\n	</div>\n	<div class="wm-window-overlay"></div>\n</div>'},useData:!0}),e.window.flex=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var s,o="function",a=e.helperMissing,r=this.escapeExpression;return'<div class="wm-window wm-window-flex '+r((s=null!=(s=e.classname||(null!=t?t.classname:t))?s:a,typeof s===o?s.call(t,{name:"classname",hash:{},data:n}):s))+'">\n	<div class="wm-window-box">\n		<header class="wm-window-title" unselectable="on">\n			<div class="wm-window-icon"></div>\n			<div class="wm-window-menu">\n				<a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">\n					<i class="fa fa-icon fa-fw fa-angle-down"></i>\n				</a>\n				<ul class="dropdown-menu"></ul>\n			</div>\n			<h1 unselectable="on">'+r((s=null!=(s=e.title||(null!=t?t.title:t))?s:a,typeof s===o?s.call(t,{name:"title",hash:{},data:n}):s))+'</h1>\n			<div class="wm-button-group">\n				<button class="wm-minimize">&nbsp;</button>\n				<button class="wm-maximize">&nbsp;</button>\n				<button class="wm-close">&nbsp;</button>\n			</div>\n		</header>\n		<section class="wm-topbar-container"></section>\n		<section class="wm-content"></section>\n		<button class="wm-resize">&nbsp;</button>\n	</div>\n	<div class="wm-window-overlay"></div>\n</div>'},useData:!0}),e.window.frameless=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var s,o="function",a=e.helperMissing,r=this.escapeExpression;return'<div class="wm-window wm-window-frameless '+r((s=null!=(s=e.classname||(null!=t?t.classname:t))?s:a,typeof s===o?s.call(t,{name:"classname",hash:{},data:n}):s))+'">\n	<div class="wm-window-box">\n		<header class="wm-window-title" unselectable="on">\n			<h1 unselectable="on">'+r((s=null!=(s=e.title||(null!=t?t.title:t))?s:a,typeof s===o?s.call(t,{name:"title",hash:{},data:n}):s))+'</h1>\n			<div class="wm-button-group">\n				<button class="wm-minimize">&nbsp;</button>\n				<button class="wm-maximize">&nbsp;</button>\n				<button class="wm-close">&nbsp;</button>\n			</div>\n		</header>\n		<section class="wm-topbar-container"></section>\n		<section class="wm-content"></section>\n		<button class="wm-resize">&nbsp;</button>\n	</div>\n	<div class="wm-window-overlay"></div>\n</div>'},useData:!0}),e.window.header=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var s,o="function",a=e.helperMissing,r=this.escapeExpression;return'<div class="wm-window wm-window-header '+r((s=null!=(s=e.classname||(null!=t?t.classname:t))?s:a,typeof s===o?s.call(t,{name:"classname",hash:{},data:n}):s))+'">\n    <div class="wm-window-box">\n        <section class="wm-content-container">\n            <header class="wm-window-title" unselectable="on">\n                <div class="wm-default-header">\n                    <div class="wm-window-icon"></div>\n                    <div class="wm-window-menu">\n                        <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">\n                            <i class="fa fa-icon fa-fw fa-angle-down"></i>\n                        </a>\n                        <ul class="dropdown-menu"></ul>\n                    </div>\n                    <h1 unselectable="on">'+r((s=null!=(s=e.title||(null!=t?t.title:t))?s:a,typeof s===o?s.call(t,{name:"title",hash:{},data:n}):s))+'</h1>\n                    <div class="wm-button-group">\n                        <button class="wm-minimize">&nbsp;</button>\n                        <button class="wm-maximize">&nbsp;</button>\n                        <button class="wm-close">&nbsp;</button>\n                    </div>\n                </div>\n                <div class="wm-custom-header"></div>\n            </header>\n            <section class="wm-topbar-container"></section>\n            <section class="wm-main-container">\n                <section class="wm-sidebar-container">\n                    <section class="wm-sidebar"></section>\n                </section>\n                <section class="wm-content"></section>\n            </section>\n            <button class="wm-resize">&nbsp;</button>\n        </section>\n    </div>\n    <div class="wm-window-overlay"></div>\n</div>'},useData:!0}),e.window.sidebar=t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var s,o="function",a=e.helperMissing,r=this.escapeExpression;return'<div class="wm-window wm-window-sidebar '+r((s=null!=(s=e.classname||(null!=t?t.classname:t))?s:a,typeof s===o?s.call(t,{name:"classname",hash:{},data:n}):s))+'">\n	<div class="wm-window-box">\n		<section class="wm-sidebar-container">\n			<section class="wm-sidebar"></section>\n		</section>\n		<section class="wm-content-container">\n			<header class="wm-window-title" unselectable="on">\n				<div class="wm-window-icon"></div>\n				<div class="wm-window-menu">\n					<a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">\n						<i class="fa fa-icon fa-fw fa-angle-down"></i>\n					</a>\n					<ul class="dropdown-menu"></ul>\n				</div>\n				<h1 unselectable="on">'+r((s=null!=(s=e.title||(null!=t?t.title:t))?s:a,typeof s===o?s.call(t,{name:"title",hash:{},data:n}):s))+'</h1>\n				<div class="wm-button-group">\n					<button class="wm-minimize">&nbsp;</button>\n					<button class="wm-maximize">&nbsp;</button>\n					<button class="wm-close">&nbsp;</button>\n				</div>\n			</header>\n			<section class="wm-topbar-container"></section>\n			<section class="wm-content"></section>\n			<button class="wm-resize">&nbsp;</button>\n		</section>\n	</div>\n	<div class="wm-window-overlay"></div>\n</div>'},useData:!0}),e}({})}),i("deskum/wm/window",["deskum/core/emitter","deskum/core/promise","deskum/core/view","deskum/tpl/templates"],function(t,e,i,n){"use strict";function s(t){return!!window.TouchEvent&&t.originalEvent instanceof window.TouchEvent}function o(t){return s(t)?t.originalEvent.changedTouches[0]:t}function a(){return $("html").hasClass("cssanimations")}var r=function(e,s){var o=this;this.wm=e,this.signals=new t;var a=n.window[s.window.template]?n.window[s.window.template]:n.window.classic;if(this.el=new i(a({title:s.window.title||"",classname:s.window.classname||""})),this.el.listen(this.events.window,this),this.fixedWindow=!1,s.window.fixed&&(this.fixedWindow=!0),s.window.opacity&&this.el.css("opacity",s.window.opacity),$.each(s.window.events,function(t,e){$.isFunction(e)&&o.signals.on(t,s.window.events[t],o)}),this.$content=this.el.find(".wm-content"),s.window.content&&this.$content.append(s.window.content),this.$header=this.el.find(".wm-custom-header"),s.window.header&&this.$header.append(s.window.header),this.$sidebarContainer=this.el.find(".wm-sidebar-container"),this.$sidebar=$(),$.isPlainObject(s.sidebar)){s.sidebar.template=s.sidebar.template||"classic";var r=n.sidebar[s.sidebar.template]||n.sidebar.classic;this.$sidebar=new i(r({classname:s.sidebar.classname||""})),this.$sidebar.listen(this.events.sidebar,this),this.$sidebarContent=this.$sidebar.find(".wm-sidebar-content"),s.sidebar.content&&this.$sidebarContent.append(s.sidebar.content),this.$sidebarContainer.width(s.sidebar.width||200).html(this.$sidebar)}if(this.$topbarContainer=this.el.find(".wm-topbar-container"),this.$topbar=$(),$.isPlainObject(s.topbar)){s.topbar.template=s.topbar.template||"classic";var l=n.topbar[s.topbar.template]||n.topbar.classic;this.$topbar=new i(l({classname:s.topbar.classname||""})),this.$topbar.listen(this.events.topbar,this),this.$topbarContent=this.$topbar.find(".wm-topbar-content"),s.topbar.content&&this.$topbarContent.append(s.topbar.content),this.$topbarContainer.html(this.$topbar)}if(this.$titlebar=this.el.find("header"),this.$titlebarIcon=this.$titlebar.find(".wm-window-icon"),this.$titlebarMenu=this.$titlebar.find(".wm-window-menu"),this.setWidth(s.window.width||400),this.setHeight(s.window.height||200),s.window.minWidth&&this.setMinWidth(s.window.minWidth),s.window.maxWidth&&this.setMaxWidth(s.window.maxWidth),this.setX(s.window.pos.x||0),this.setY(s.window.pos.y||0),this.setZ(1e4),this.$dock=$(),$.isPlainObject(s.dock)){var c=n.dock[s.dock.template||"classic"]?n.dock[s.dock.template||"classic"]:n.dock.classic;this.$dock=new i(c({title:s.window.title||"",classname:s.dock.classname||""})),this.$dock.listen(this.events.dock,this),this.$dockContent=this.$dock.find(".wm-label-content"),s.dock.content&&this.$dockContent.append(s.dock.content)}if(this.$taskbar=$(),$.isPlainObject(s.taskbar)){var h=n.taskbar[s.taskbar.template||"classic"]?n.taskbar[s.taskbar.template||"classic"]:n.taskbar.classic;this.$taskbar=new i(h({title:s.window.title||"",classname:s.taskbar.classname||""})),this.$taskbar.listen(this.events.taskbar,this),this.$taskbarContent=this.$taskbar.find(".task-button-content"),s.taskbar.content&&this.$taskbarContent.append(s.taskbar.content)}this.validateClose=$.isFunction(s.window.validateClose)?s.window.validateClose:null,this.setEnabled(!0),this.setActive(!1),this.setMaximized(!1),this.setMinimized(!1),this._closed=!0,this._destroyed=!1,this.setWidget(!1),this.setMovable(!0),this.setResizable("undefined"!=typeof s.window.resizable?s.window.resizable:!0),this.setMinimizable("undefined"!=typeof s.window.minimizable?s.window.minimizable:!0),this.setTitlebar("undefined"!=typeof s.window.titlebar?s.window.titlebar:!0),this.setIcon("undefined"!=typeof s.window.icon?s.window.icon:!1),this.setMenu("undefined"!=typeof s.window.menu?s.window.menu:!1),this.handlers=s.window.handlers||{}};return r.prototype={_restore:null,_moving:null,_moved:null,_resizing:null,slots:{move:function(t){var e=o(t);this.getEnabled()&&this.getMovable()&&(this._moving=this.toLocal({x:e.pageX,y:e.pageY}),this.el.addClass("move"),t.preventDefault())}},events:{window:{click:function(t){this.signals.emit("select",this,t)},mousedown:function(t){this.focus(),this.getWidget()&&this.slots.move.call(this,t)},".wm-content click":function(t){this.getEnabled()&&this.signals.emit("click",this,t)},".wm-window-title mousedown":function(t){this.slots.move.call(this,t)},".wm-window-title dblclick":function(){this.getEnabled()&&this.getResizable()&&this.maximize()},".wm-window-title .wm-close click":function(t){var e=!0;t.stopPropagation(),t.preventDefault(),this.getEnabled()&&($.isFunction(this.validateClose)&&(e=this.validateClose()),e&&this.close())},".wm-window-title .wm-maximize click":function(t){t.stopPropagation(),t.preventDefault(),this.getEnabled()&&this.getResizable()&&this.maximize()},".wm-window-title .wm-minimize click":function(t){t.stopPropagation(),t.preventDefault(),this.getEnabled()&&this.minimize()},".wm-window-title button mousedown, .wm-window-title .wm-control-button mousedown":function(t){this.focus(),t.stopPropagation(),t.preventDefault()},"button.wm-resize mousedown":function(t){var e=o(t);this.getEnabled()&&this.getResizable()&&(this._resizing={width:this.getWidth()-e.pageX,height:this.getHeight()-e.pageY},this.el.addClass("resizing"),this.signals.emit("startResize",this),t.preventDefault())}},space:{mousemove:function(t){var e=o(t);s(t)||1===t.which||(this._moving&&this._stopMove(),this._resizing&&this._stopResize()),this._moving&&(this.move(e.pageX-this._moving.x,e.pageY-this._moving.y),this._moved=!0),this._resizing&&this.resize(e.pageX+this._resizing.width,e.pageY+this._resizing.height)},mouseup:function(){this._moving&&this._stopMove(),this._resizing&&this._stopResize()}},dock:{click:function(t){this.getMinimized()&&this.setMinimized(!1),this.signals.emit("select",this,t)}},taskbar:{click:function(t){this.getMinimized()&&this.setMinimized(!1),this.signals.emit("select",this,t)}},sidebar:{},topbar:{}},_stopMove:function(){this.el.removeClass("move"),this._moved&&this.signals.emit("move",this),this._moving=null,this._moved=null},_stopResize:function(){this.el.removeClass("resizing"),this._restore=null,this._resizing=null,this.signals.emit("resize",this)},setSpace:function(t){return t&&!t.listen?void(window.console&&window.console.log&&console.log("The given space element is not a valid View")):(this._space=t,t.append(this.el),void t.listen(this.events.space,this))},getSpace:function(){return this._space},setTaskbar:function(t){return t&&!t.listen?void(window.console&&window.console.log&&console.log("The given taskbar element is not a valid View")):(t=new i(t.hasClass("wm-taskbar-apps")?t:t.find(".wm-taskbar-apps")),t.append(this.$taskbar),void(this._taskbar=t))},getTaskbar:function(){return this._taskbar},setDock:function(t){return t&&!t.listen?void(window.console&&window.console.log&&console.log("The given dock element is not a valid View")):(t=new i(t.hasClass("wm-dock-labels")?t:t.find(".wm-dock-labels")),t.append(this.$dock),void(this._dock=t))},getDock:function(){return this._dock},setMaximized:function(t){t?(this._restoreMaximized=this.stamp(),this.signals.emit("maximize",this,this._restoreMaximized),this.el.addClass("wm-maximized")):(this.signals.emit("restore",this,this._restoreMaximized),this.el.removeClass("wm-maximized")),this._maximized=t},getMaximized:function(){return this._maximized},setMinimized:function(t){t?(this._restoreMinimized=this.stamp(),this.signals.emit("minimize",this,this._restoreMinimized),this.el.addClass("wm-minimized")):(this.signals.emit("restore",this,this._restoreMinimized),this.el.removeClass("wm-minimized")),this._minimized=t},getMinimized:function(){return this._minimized},setActive:function(t){t?(this.signals.emit("focus",this),this.el.addClass("active"),this.el.removeClass("inactive"),this.$dock.addClass("active"),this.$dock.removeClass("inactive"),this.$taskbar.addClass("active"),this.$taskbar.removeClass("inactive")):(this.signals.emit("blur",this),this.el.removeClass("active"),this.el.addClass("inactive"),this.$dock.removeClass("active"),this.$dock.addClass("inactive"),this.$taskbar.removeClass("active"),this.$taskbar.addClass("inactive")),this._active=t},getActive:function(){return this._active},setEnabled:function(t){t?this.el.removeClass("disabled"):this.el.addClass("disabled"),this._enabled=t},getEnabled:function(){return this._enabled},setMovable:function(t){this._movable=!!t
},getMovable:function(){return this._movable},setResizable:function(t){t?this.el.removeClass("noresizable"):this.el.addClass("noresizable"),this._resizable=!!t},getResizable:function(){return this._resizable},setMinimizable:function(t){t?this.el.removeClass("no-minimizable"):this.el.addClass("no-minimizable"),this._minimizable=!!t},getMinimizable:function(){return this._minimizable},setClosed:function(){},getClosed:function(){return this._closed},setDestroyed:function(){},getDestroyed:function(){return this._destroyed},setWidget:function(t){this._widget=t},getWidget:function(){return this._widget},setTitlebar:function(t){t?this.$titlebar.removeClass("hide"):this.$titlebar.addClass("hide"),this._titlebar=t},getTitlebar:function(){return this._titlebar},setIcon:function(t){t?this.$titlebarIcon.html(t).removeClass("hide"):this.$titlebarIcon.empty().addClass("hide"),this._icon=t},getIcon:function(){return this._icon},setMenu:function(t){t?(this.$titlebarMenu.removeClass("hide"),this.$titlebarMenu.find(".dropdown-toggle").dropdown()):this.$titlebarMenu.addClass("hide"),this._menu=t},getMenu:function(){return this._menu},setWidth:function(t){this.el.width(t)},getminWidth:function(){return parseInt(this.el.css("minWidth").replace(/px/,""),10)},getWidth:function(){return parseInt(this.el.width(),10)},setMinWidth:function(t){this.el.css({minWidth:t+"px"})},setMaxWidth:function(t){this.el.css({maxWidth:t+"px"})},setHeight:function(t){this.el.height(t)},getHeight:function(){return parseInt(this.el.height(),10)},setX:function(t){this.el.css("left",t)},getX:function(){return parseInt(this.el.css("left"),10)},setY:function(t){this.el.css("top",t)},getY:function(){return parseInt(this.el.css("top"),10)},setZ:function(t){this.el.css("z-index",t)},getZ:function(){return parseInt(this.el.css("z-index"),10)},open:function(){if(this.signals.emit("open",this),this.el.show(),this._closed=!1,a()){var t=new e;return this.el.addClass("opening"),this.el.onAnimationEnd(function(){this.el.removeClass("opening"),this.handlers&&$.isFunction(this.handlers.open)&&this.handlers.open(this),t.done()},this),t}return this.handlers&&$.isFunction(this.handlers.open)&&this.handlers.open(this),!0},close:function(){var t=new e;return this.signals.emit("close",this),this._closed=!0,this.closeDock(),this.closeTaskbar(),a()?(this.el.addClass("closing"),this.el.onAnimationEnd(function(){this.el.removeClass("closing"),this.el.addClass("closed"),this.el.hide(),this.signals.emit("closed",this),this.handlers&&$.isFunction(this.handlers.close)&&this.handlers.close(this),t.done()},this),t):(this.el.addClass("closed"),this.el.hide(),this.signals.emit("closed",this),this.handlers&&$.isFunction(this.handlers.close)&&this.handlers.close(this),t.done())},closeDock:function(){this.$dock&&this.$dock.length&&(this.$dock.addClass("closed"),this.$dock.hide())},closeTaskbar:function(){this.$taskbar&&this.$taskbar.length&&(this.$taskbar.addClass("closed"),this.$taskbar.hide())},destroy:function(){var t=function(){this.destroyDock(),this.destroyTaskbar(),this.el.remove(),this.signals.emit("destroyed",this),this._destroyed=!0,this.handlers&&$.isFunction(this.handlers.destroy)&&this.handlers.destroy(this)}.bind(this);this.signals.emit("destroy",this),this.getClosed()?t():this.close().then(function(){t()})},destroyDock:function(){this.$dock&&this.$dock.length&&this.$dock.remove()},destroyTaskbar:function(){this.$taskbar&&this.$taskbar.length&&this.$taskbar.remove()},resize:function(t,e,i,n){var s,o,a=this.getX(),r=this.getY(),l=this.getWidth(),c=this.getHeight(),h=this.getminWidth();return i=i||!1,n=n||!1,h>l&&this.setMinWidth(t),this.setWidth(t),this.setHeight(e),i&&(s=a+(l-t)/2,this.setX(s)),n&&(o=r+(c-e)/2,this.setY(o)),this.el.removeClass("wm-minimized"),this.el.removeClass("wm-maximized"),this.handlers&&$.isFunction(this.handlers.resize)&&this.handlers.resize(this),this},move:function(t,e){return this.setX(t),this.setY(e),this.handlers&&$.isFunction(this.handlers.move)&&this.handlers.move(this),this},show:function(){this.el.show(),this.handlers&&$.isFunction(this.handlers.show)&&this.handlers.show(this)},hide:function(){this.el.hide(),this.handlers&&$.isFunction(this.handlers.hide)&&this.handlers.hide(this)},stamp:function(){return this.restore=function(){var t={width:this.getWidth(),height:this.getHeight()},e={x:this.getX(),y:this.getY()};return function(){return this.resize(t.width,t.height),this.move(e.x,e.y),this.show(),this}}.apply(this),this.restore},restore:function(){},maximize:function(){var t=this.getMaximized(),e=!t;return this.setMaximized(e),e?this.el.addClass("wm-maximized"):this.el.removeClass("wm-maximized"),this.handlers&&$.isFunction(this.handlers.maximize)&&this.handlers.maximize(this,e),this},minimize:function(){var t=this.getMinimized(),e=!t;return this.setMinimized(e),e?this.el.addClass("wm-minimized"):this.el.removeClass("wm-minimized"),this.handlers&&$.isFunction(this.handlers.minimize)&&this.handlers.minimize(this,e),this},focus:function(){return this.setActive(!0),this.handlers&&$.isFunction(this.handlers.focus)&&this.handlers.focus(this),this},blur:function(){return this.setActive(!1),this.handlers&&$.isFunction(this.handlers.blur)&&this.handlers.blur(this),this},toLocal:function(t){return{x:t.x-this.getX(),y:t.y-this.getY()}},toGlobal:function(t){return{x:t.x+this.getX(),y:t.y+this.getY()}},append:function(t){t.appendTo(this.$content)}},r.prototype.addMenuOption=function(t,e,i){if(this.$titlebarMenu&&this.$titlebarMenu.length){var n,s=this.$titlebarMenu.find(".dropdown-menu");return n=$('<li class="wm-menu-item wm-menu-item-'+t+'"><a href="javascript:void(0);" class="wm-menu-trigger wm-menu-trigger-'+t+'">'+e+"</a></li>"),s.append(n),$.isFunction(i)&&n.on("click.deskum",$.proxy(i,this)),n}return $()},r.prototype.editMenuOption=function(t,e,i){if(this.$titlebarMenu&&this.$titlebarMenu.length){var n=this.$titlebarMenu.find(".dropdown-menu"),s=n.find(".wm-menu-item-"+t);return s.length&&(s.children("a").html(e),s.off(".deskum"),$.isFunction(i)&&s.on("click.deskum",$.proxy(i,this))),s}return $()},r.prototype.removeMenuOption=function(t){if(this.$titlebarMenu&&this.$titlebarMenu.length){var e=this.$titlebarMenu.find(".dropdown-menu"),i=e.find(".wm-menu-item-"+t);i.length&&i.off().remove()}},r.prototype.addMenuSeparator=function(t){if(this.$titlebarMenu&&this.$titlebarMenu.length){var e,i=this.$titlebarMenu.find(".dropdown-menu");return e=$('<li role="separator" class="divider wm-menu-divider-'+t+'"></li>'),i.append(e),e}return $()},r.prototype.removeMenuSeparator=function(t){if(this.$titlebarMenu&&this.$titlebarMenu.length){var e=this.$titlebarMenu.find(".dropdown-menu"),i=e.find(".wm-menu-divider-"+t);i.length&&i.off().remove()}},r}),i("deskum/wm/modes/default",[],function(){"use strict";var t={register:function(){},plug:function(){},unplug:function(){},actions:{maximize:function(t){t.move(0,0),t.resize(this.el.width(),this.el.height())},restore:function(t,e){e&&e.call(t)},minimize:function(t){t.hide(),t.blur()},select:function(t){this.setMode("default"),t.focus()}}};return t}),i("deskum/wm/modes/expose",[],function(){"use strict";var t={register:function(){},plug:function(){var t,e,i,n,s=Math.floor,o=Math.ceil,a=this,r=o(this.windows.length/2),l=s(this.el.width()/r),c=s(this.el.height()/2);this.el.addClass("expose");for(var h,d=0,u=this.windows.length;u>d;d++)h=this.windows[d],h.stamp(),t=h.getHeight()>h.getWidth()?h.getHeight()>c?c/h.getHeight():1:h.getWidth()>l?l/h.getWidth():1,t-=.15,n={x:d%r*l,y:(r>d?0:1)*c},e=n.x+s((l-t*h.getWidth())/2),i=n.y+s((c-t*h.getHeight())/2),h.setEnabled(!1),h.setMovable(!1),h.el.addClass("exposing"),h.el.css("transform-origin","0 0"),h.el.css("transform","scale("+t+")"),h.el.css("top",i),h.el.css("left",e),h.el.onTransitionEnd(function(){h.el.removeClass("exposing")},this);this.setOverlay(!0),this.el.one("click",function(){a.setMode("default")})},unplug:function(){for(var t,e=this.windows.length;e--;){t=this.windows[e],t.restore(),t.el.css("transform","scale(1)"),t.el.css("transform-origin","50% 50%");var i=function(t){return function(){this.el.removeClass("expose"),t.el.css("transform","")}}(t);this.el.onTransitionEnd(i,this),t.setMovable(!0),t.setEnabled(!0)}this.setOverlay(!1)},actions:{focus:function(){},close:function(){this.setMode("expose")},select:function(t){this.setMode("default"),t.focus()}}};return t}),i("deskum/wm/modes/fullscreen",[],function(){"use strict";var t={register:function(){},plug:function(){this.el.addClass("fullscreen");for(var t,e=0,i=this.windows.length;i>e;e++)t=this.windows[e],t.move(0,0),t.el.css("-webkit-transform","translate3d(0, 0, 0);"),t.resize(this.el.width(),this.el.height())},unplug:function(){for(var t,e=this.windows.length;e--;){t=this.windows[e],t.restore(),t.el.css("transform","scale(1)"),t.el.css("transform-origin","50% 50%");var i=function(t){return function(){this.el.removeClass("fullscreen"),t.el.css("transform","")}}(t);this.el.onTransitionEnd(i,this),t.setMovable(!0),t.setResizable(!0),t.setEnabled(!0)}this.setOverlay(!1)},actions:{focus:function(){},close:function(){this.setMode("expose")},select:function(t){this.setMode("default"),t.focus()}}};return t}),i("deskum/wm/windowmanager",["deskum/wm/window","deskum/core/view","deskum/wm/modes/default","deskum/wm/modes/expose","deskum/wm/modes/fullscreen"],function(t,e,i,n,s){"use strict";var o={desktop:{content:""},taskbar:!1,dock:!1,content:'<div class="wm-container"><div class="wm-taskbar"></div><div class="wm-desktop"><div class="wm-space"><div class="wm-overlay"></div></div></div><div class="wm-dock"></div></div>'},a={window:{icon:!1,menu:!1,title:"Untitled",width:400,height:200,pos:"auto",defaultPos:{x:0,y:0},minWidth:200,minHeight:60,posDiff:50,template:"classic",content:"",header:"",movable:!0,resizable:!0,minimizable:!0,widget:!1,titlebar:!0,events:{closed:function(){this.destroy()}}},taskbar:!1,dock:!1},r=function(){var t,i,n,s,a,r=this,l=Array.prototype.slice.call(arguments);"string"==typeof l[0]?(t=l[0],i=l[1]||{}):(t=document.body,i=l[0]||{}),i=$.extend(!0,{},o,i||{}),s=$.extend(!0,{},o.desktop,i.desktop||{}),n=i.taskbar?$.extend(!0,{},o.taskbar,i.taskbar||{}):!1,a=i.dock?$.extend(!0,{},o.dock,i.dock||{}):!1,this.$viewport=new e(i.content),$(t).prepend(this.$viewport),this.el=new e(this.$viewport.find(".wm-space")),this.$taskbar=new e(this.$viewport.find(".wm-taskbar")),n?(n.selector&&(this.$taskbar.remove(),this.$taskbar=new e(n.selector)),this.$taskbar.append(n.content)):(this.$taskbar.remove(),this.$taskbar=$()),this.$desktop=new e(this.$viewport.find(".wm-desktop")),this.$desktop.append(s.content),this.$dock=new e(this.$viewport.find(".wm-dock")),a?(a.selector&&(this.$dock.remove(),this.$dock=new e(a.selector)),this.$dock.append(a.content)):(this.$dock.remove(),this.$dock=$()),this.$overlay=this.el.find(".wm-overlay"),this.$overlay=new e(this.$overlay),this.$overlay.css("z-index",this._baseZ-1),$.each(this.actions,function(t,e){r[e]=function(t){return function(){this.getCurrentMode().actions[t]&&this.getCurrentMode().actions[t].apply(this,arguments)}}.call(r,e)}),$.each(this.modes,function(t){r.modes[t].register&&r.modes[t].register.apply(r)}),this.windows=[],this.active=null,this.setMode("default")};return r.prototype={actions:["focus","blur","close","maximize","minimize","restore","select"],modes:{"default":i,expose:n,fullscreen:s},setWidth:function(t){this.el.width(t)},getWidth:function(){return parseInt(this.el.width(),10)},setHeight:function(t){this.el.height(t)},getHeight:function(){return parseInt(this.el.height(),10)},setDesktopDims:function(t){var e=t&&t.width?t.width:null,i=t&&t.height?t.height:null;this.setDesktopWidth(e),this.setDesktopHeight(i)},getDesktopDims:function(){var t={width:this.getDesktopWidth(),height:this.getDesktopHeight()};return t},setDesktopWidth:function(t){t=t||parseInt(this.el.width(),10),this.$desktop.width(t)},getDesktopWidth:function(){return parseInt(this.$desktop.width(),10)},setDesktopHeight:function(t){if(!t){var e=this.el.closest(".wm-container"),i=e.find(".wm-taskbar"),n=e.find(".wm-dock");t=parseInt(e.height()-i.height()-n.height(),10)}this.$desktop.height(t)},getDesktopHeight:function(){return parseInt(this.$desktop.height(),10)},setMode:function(t){var e=this.modes[t];e&&this._mode!==t&&(this._mode&&this.getCurrentMode().unplug&&this.getCurrentMode().unplug.apply(this),e.plug&&e.plug.apply(this),this._mode=t)},getMode:function(){return this._mode},getCurrentMode:function(){return this.modes[this._mode]},setOverlay:function(t){this.$overlay.css("opacity",t?.8:0),this._overlay=t},getOverlay:function(){return this._overlay},_focus:function(t){var e,i,n=1e4,s=n+1e4;if(!this.active||this.active!==t){if(this.active?(e=this.active.getZ(),this.active.blur()):e=n,i=this.windows.indexOf(t),this.windows.splice(i,1),this.windows.push(t),t.setZ(e+1),e>s+this.windows.length)for(var o,a=this.windows.length;a--;)o=this.windows[a].getZ(),this.windows[a].setZ(n+(o-s));this.active=t}},_blur:function(t){this.active===t&&(this.active=null)},_close:function(t){var e,i,n=this.windows.indexOf(t);return-1===n?void(window.console&&window.console.log&&console.log("Trying to close a window that doesn't exist in this window manager")):(this.windows.splice(n,1),void(this.active&&this.active===t&&(e=this.windows.slice(),e=_(e).reject(function(t){return t.getMinimized()}),i=e.length,this.active=0!==i?e[i-1]:null,this.active&&this.active.focus())))},_minimize:function(t){var e,i,n=this.windows.indexOf(t);return-1===n?void(window.console&&window.console.log&&console.log("Trying to minimize a window that doesn't exist in this window manager")):void(this.active&&this.active===t&&(e=this.windows.slice(),e.splice(n,1),e=_(e).reject(function(t){return t.getMinimized()}),i=e.length,this.active=0!==i?e[i-1]:null,this.active&&this.active.focus()))}},r.prototype.bindEvents=function(){var t=this,e=$(window);e.resize(_.debounce(function(){t.setHeight(e.height()),t.setWidth(e.width()),t.setDesktopDims()},100))},r.prototype.createWindow=function(){var i,n,s,o=this,r=Array.prototype.slice.call(arguments);return 1===r.length?n=r[0]||{}:r.length>1&&(i=r[0],n=r[1]||{},n.window=n.window||{},n.window.content=new e(i)),n=$.extend(!0,{},a,n),n.window.width=this.constraintWindowWidth(n.window),n.window.height=this.constraintWindowHeight(n.window),"string"==typeof n.window.pos&&(n.window.pos=this.calculateWindowPosition(n.window)),s=new t(this,n),this.setMode("default"),s.signals.on("focus",this._focus,this),s.signals.on("blur",this._blur,this),s.signals.on("close",this._close,this),s.signals.on("minimize",this._minimize,this),$.each(this.actions,function(t,e){s.signals.on(e,o[e],o)}),this.windows.push(s),s.setSpace(this.el),$.isPlainObject(n.dock)&&s.setDock(this.$dock),$.isPlainObject(n.taskbar)&&s.setTaskbar(this.$taskbar),s.focus(),s},r.prototype.constraintWindowWidth=function(t){var e=a.window.minWidth,i=this.getWidth(),n=t.width;return n=n>=e?n:e,n=i>=n?n:i},r.prototype.constraintWindowHeight=function(t){var e=a.window.minHeight,i=this.el.height(),n=t.height;return n=n>=e?n:e,n=i>=n?n:i},r.prototype.calculateWindowPosition=function(t){var e,i,n,s,o=a.window.defaultPos,r=t.width,l=t.height,c=this.getDesktopWidth(),h=this.getDesktopHeight(),d=10;return"auto"===t.pos&&(this.active&&!this.active.fixedWindow?(e=this.active.getX()+t.posDiff,i=this.active.getY()+t.posDiff,o.x=c>e+r?e:0,o.y=h>i+l?i:0):t.pos="center"),"top-left"===t.pos&&(o.x=0+d,o.y=0+d),"top-center"===t.pos&&(n=Math.floor(c/2),o.x=n-Math.floor(r/2),o.y=0+d),"top-right"===t.pos&&(o.x=c-r-d,o.y=0+d),"center-left"===t.pos&&(s=Math.floor(h/2),o.x=0+d,o.y=s-Math.floor(l/2)),("center"===t.pos||"center-center"===t.pos)&&(n=Math.floor(c/2),s=Math.floor(h/2),o.x=n-Math.floor(r/2),o.y=s-Math.floor(l/2)),"center-right"===t.pos&&(s=Math.floor(h/2),o.x=c-r-d,o.y=s-Math.floor(l/2)),"bottom-left"===t.pos&&(o.x=0+d,o.y=h-l-d),"bottom-center"===t.pos&&(n=Math.floor(c/2),o.x=n-Math.floor(r/2),o.y=h-l-d),"bottom-right"===t.pos&&(o.x=c-r-d,o.y=h-l-d),o},r.prototype.toggleExposeMode=function(){this.setMode("expose"===this.getMode()?"default":"expose")},r}),i("deskum",["require","exports","module","deskum/wm/windowmanager","deskum/wm/window"],function(t){"use strict";return{version:"0.8.6",browser:{animationEventName:function(){var t=document.body.style,e=null;return""===t.animation?e="animationend":""===t.MozAnimation?e="mozAnimationEnd":""===t.webkitAnimation&&(e="webkitAnimationEnd"),e}},WindowManager:t("deskum/wm/windowmanager"),Window:t("deskum/wm/window")}}),i("src/main",["almond","handlebars","deskum"],function(){}),e("deskum")});